(()=>{"use strict";const e="function"==typeof atob,t="function"==typeof btoa,r="function"==typeof Buffer,n="function"==typeof TextDecoder?new TextDecoder:void 0,o="function"==typeof TextEncoder?new TextEncoder:void 0,a=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],c=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(a),i=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),f=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),l=t?e=>btoa(e):r?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,n,o,c="";const i=e.length%3;for(let i=0;i<e.length;){if((r=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,c+=a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return i?c.slice(0,i-3)+"===".substring(i):c},u=r?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(d.apply(null,e.subarray(r,r+4096)));return l(t.join(""))},s=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?d(192|t>>>6)+d(128|63&t):d(224|t>>>12&15)+d(128|t>>>6&63)+d(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return d(240|t>>>18&7)+d(128|t>>>12&63)+d(128|t>>>6&63)+d(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,g=r?e=>Buffer.from(e,"utf8").toString("base64"):o?e=>u(o.encode(e)):e=>l(e.replace(p,s)),A=(e,t=!1)=>t?(e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""))(g(e)):g(e),m=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return d(55296+(t>>>10))+d(56320+(1023&t));case 3:return d((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return d((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},C=e?e=>atob(f(e)):r?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!i.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,o="";for(let a=0;a<e.length;)t=c[e.charAt(a++)]<<18|c[e.charAt(a++)]<<12|(r=c[e.charAt(a++)])<<6|(n=c[e.charAt(a++)]),o+=64===r?d(t>>16&255):64===n?d(t>>16&255,t>>8&255):d(t>>16&255,t>>8&255,255&t);return o},x=r?e=>h(Buffer.from(e,"base64")):e=>h(C(e),(e=>e.charCodeAt(0))),b=r?e=>Buffer.from(e,"base64").toString("utf8"):n?e=>n.decode(x(e)):e=>C(e).replace(m,y),F=e=>b(f(e.replace(/[-_]/g,(e=>"-"==e?"+":"/")))),S=new class{constructor(){this.nav=[],this.loadedPages={},this.content=document.querySelector("article")}loadPage(e){this.content.innerHTML="",addLoadingIcon(this.content),history.pushState({},"",e),fetch("/nacho?p="+e).then((e=>e.text())).then((function(e){try{e=JSON.parse(e)}catch(t){console.log(t),e={title:"500",content:A("There was an error")}}e.forEach((function(e){S.printPage(e)})),removeLoadingIcon(S.content)}))}printPage(e){this.content.innerHTML+="<h2 id='"+e.id+"'>"+e.meta.title+"</h2>"+F(e.content),document.querySelector('meta[name="description"]').remove(),document.querySelector("head").innerHTML+='<meta name="description" content="'+e.description+'">',document.querySelector("aside ul").innerHTML+="<li><a href='#"+e.id+"'>"+e.title+"</a></li>"}};let B=location.pathname;"/"===location.pathname&&(B="/"),S.loadPage(B)})();